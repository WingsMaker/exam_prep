<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="mobile-web-app-capable" content="yes">
<link rel="icon" type="image/x-icon" href="https://wingsmaker.github.io/Github/kh.ico">
<title>Exam Qn Viewer</title>
<script type="text/javascript" src="https://wingsmaker.github.io/Github/jquery.min.js"></script>
</head>
<body style="background-color:black;color:white"> 
<h3><a id="a-title" style="color:white" href="https://wingsmaker.github.io/exam_prep/">Home</a></h3>
<h1>Exam Questions Viewer</h1>
<br>
<div id="exam" style="font-size: 20px;">
	<div id="qns"></div>
	<br>
	<div id="cht"></div>
	<br>
	<input type="range" min="1" max="300" value="1" id="qrng" style="width: 100%">
	<label for="qrng">Side thru to choose from the questions</label>
	<br>
	<br>
	<br>
	<input id="viewqn" type="submit" value="Answers" style="height: 80px;width: 100px"/>
	<input id="prev" type="submit" value="Prev" style="height: 80px;width: 100px"/>
	<input id="next" type="submit" value="Next" style="height: 80px;width: 100px"/>
	<input id="voice" type="submit" value="Voice" style="height: 80px;width: 100px"/>
	<br>
	<label for="rate">Voice speed : slower to faster</label>
	<input type="range" min="0.5" max="2" value="1" step="0.1" id="rate" />
	<br>
	<label for="ratio">Font size : smaller to bigger</label>
	<input type="range" min="1" max="8" value="4" step="1" id="ratio" />
</div>
<hr>
</body>

<script>
console.clear();
const synth = window.speechSynthesis;
var arr_charts = [11,12,23,25,68];
let desktop_mode = 1;
let qnmode = 0; 
let max_qns = 200;
let voice = new SpeechSynthesisUtterance();
voice.rate = 1;
voice.pitch = 1; 
voice.volume = 1;
voice.lang = "en-SG";
document.getElementById("qrng").max = max_qns;
document.getElementById("qrng").min = "1";
document.getElementById("qrng").value = "1";
display_content(1);

if ( ( window.innerWidth <= 1024 ) && ( window.innerHeight <= 2048 ) ) {
	resize_screen(6);
	document.getElementById("rate").value = 6;
} else {
	resize_screen(4);
	document.getElementById("rate").value = 4;
}
  
$(document).ready(function(){
  $("#viewqn").click(function(){
	qnmode = 1 - qnmode;
	if( qnmode==0 ) {
		document.getElementById("viewqn").value = "Answers";
	} else {
		document.getElementById("viewqn").value = "Questions";
	}	
	r = document.getElementById("qrng").value;
	ii = parseInt(r);
	display_content(ii);
  });
});

$(document).ready(function(){
  $("#prev").click(function(){
	r = document.getElementById("qrng").value;
	i = parseInt(r);
	if( i >  1 ) {
		i = i - 1;
		r = i.toString();
	}
	document.getElementById("qrng").value = r;
	display_content(i);
  });
});

$(document).ready(function(){
  $("#next").click(function(){
	m = parseInt(document.getElementById("qrng").max);
	r = document.getElementById("qrng").value;
	i = parseInt(r);
	if( i <  m ) {
		i = i + 1;
		r = i.toString();
	}
	document.getElementById("qrng").value = r;
	display_content(i);
  });
});

$(document).ready(function(){
  $("#voice").click(function(){
	var msg = document.getElementById("qns").innerHTML;
	document.getElementById("qrng")
	msg = msg.replaceAll("</","<");
	msg = msg.replaceAll("<h3>"," ");
	msg = msg.replaceAll("<p>"," ");
	msg = msg.replaceAll("<br>","\n");
	textToSpeech(msg);
  });
});

$(document).ready(function(){
  $("#screen").click(function(){
	desktop_mode = 1 - desktop_mode;
	if (desktop_mode==0) {
		mobile_screen();
	} else {
		desktop_screen();
	}
  });
});

document.getElementById("qrng").oninput = function() {
	r = document.getElementById("qrng").value;
	ii = parseInt(r);
	display_content(ii);
}

document.getElementById("rate").oninput = function() {
	r = document.getElementById("rate").value;
	voice.rate = r;
}

document.getElementById("ratio").oninput = function() {
	r = document.getElementById("ratio").value;
	resize_screen(r);
}

function display_content(ii) {
	var fn,cht,prefix;
	if( qnmode==0 ) {
		prefix = "qns_";
	} else {
		prefix = "ans_";
	}
	fn = "000" + ii.toString();
	fn = fn.substr( fn.length - 4);
	fn = "https://wingsmaker.github.io/exam_prep/qna/" + prefix + fn + ".txt";
	fetch(fn).then( r => r.text() ).then( t => {
		var result = t.replaceAll("\n","<br>");
		var msg = "<h3>Question #" + ii.toString() + ":</h3><p>" + result + "</p>";
		document.getElementById("qns").innerHTML = msg;
		if( qnmode==0 ) {
			cht = "000" + ii.toString();
			cht = cht.substr( cht.length - 4);
			cht = "https://wingsmaker.github.io/exam_prep/qna/img_" + cht + ".jpg";		
			if ( arr_charts.includes(ii) ) {
				msg = "<img src='" + cht + "' height='300'>";	
				document.getElementById("cht").innerHTML = msg;	
			} else {
				document.getElementById("cht").innerHTML = "";
			}
		} else {
			document.getElementById("cht").innerHTML = "";
		}
	});
}

function textToSpeech(msg) {
	voice.text = msg;
	synth.speak(voice);
}

function resize_screen(idx) {
	if ( idx==0 ) {
		return;
	}
	document.getElementById("exam").style.fontSize = (5 * idx).toString() + "px";
	document.getElementById("viewqn").style.fontSize = (5 * idx).toString() + "px";
	document.getElementById("viewqn").style.width = (25 * idx).toString() + "px";
	document.getElementById("viewqn").style.height = (20 * idx).toString() + "px";
	document.getElementById("prev").style.fontSize = (5 * idx).toString() + "px";
	document.getElementById("prev").style.width = (25 * idx).toString() + "px";
	document.getElementById("prev").style.height = (20 * idx).toString() + "px";
	document.getElementById("next").style.fontSize = (5 * idx).toString() + "px";
	document.getElementById("next").style.width = (25 * idx).toString() + "px";
	document.getElementById("next").style.height = (20 * idx).toString() + "px";
	document.getElementById("voice").style.fontSize = (5 * idx).toString() + "px";
	document.getElementById("voice").style.width = (25 * idx).toString() + "px";
	document.getElementById("voice").style.height = (20 * idx).toString() + "px";
	desktop_mode = 1;
}


</script>

</html>